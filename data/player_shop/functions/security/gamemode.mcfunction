# If "Player", is NOT facing chest change their score, to "0" and survival mode them:
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^1 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^1 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^1 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^-1 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^-1 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^-1 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^2 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^2 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^2 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^-2 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^-2 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^-2 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^3 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^3 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^3 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^-3 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^-3 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^-3 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^4 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^4 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^4 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^-4 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^-4 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^-4 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^5 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^5 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^5 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^-5 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^-5 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes unless block ^ ^ ^-5 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 0



# If "Player", is facing chest change their score, to "1" and adventure mode them:
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^1 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^1 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^1 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^-1 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^-1 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^-1 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^2 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^2 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^2 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^-2 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^-2 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^-2 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^3 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^3 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^3 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^-3 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^-3 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^-3 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^4 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^4 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^4 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^-4 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^-4 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^-4 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1

execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^5 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^5 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^5 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^-5 ^ ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^-5 ^ minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s anchored eyes if block ^ ^ ^-5 minecraft:chest{Lock:"ps_key"} run scoreboard players set @s shop_chests 1


# Not Facing chest "Survival" Mode:
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s run gamemode survival @s[scores={shop_chests=0}]

# Facing chest "Adventure" Mode:
execute as @a at @s run execute as @e[type=minecraft:villager,tag=player_shop,distance=0..5] at @s unless score @p ps_owner = @s ps_id run execute as @p at @s run gamemode adventure @s[scores={shop_chests=1}]